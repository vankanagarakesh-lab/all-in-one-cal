<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>All-in-One Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  box-sizing: border-box;
  font-family: system-ui, Arial, sans-serif;
}

body {
  margin: 0;
  background: #0f1115;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Calculator */
.calculator {
  width: 100%;
  max-width: 420px;
  height: 100vh;
  background: #15181e;
  display: flex;
  flex-direction: column;
  color: white;
  position: relative;
  overflow: hidden;
}

/* Top bar */
.top-bar {
  padding: 14px 16px;
  display: flex;
  align-items: center;
}

.menu-btn {
  font-size: 22px;
  cursor: pointer;
}

.title {
  margin: auto;
  font-size: 16px;
  opacity: 0.7;
}

/* Slide Menu */
.menu-container {
  position: absolute;
  top: 0;
  left: -100%;
  width: 85%;
  height: 100%;
  background: #0f1115;
  transition: 0.3s ease;
  z-index: 10;
}

.menu-container.open {
  left: 0;
}

.menu-container iframe {
  width: 100%;
  height: 100%;
  border: none;
}

/* Display */
.display {
  padding: 20px;
  text-align: right;
}

.expression {
  width: 100%;
  background: transparent;
  border: none;
  outline: none;
  color: white;
  font-size: 26px;
  text-align: right;
}

.result {
  font-size: 40px;
  min-height: 48px;
}

/* Scientific */
.scientific {
  display: flex;
  gap: 6px;
  padding: 6px 10px;
}

.scientific button {
  flex: 1;
  height: 36px;
  font-size: 14px;
  border-radius: 8px;
}

/* Buttons */
.buttons {
  margin-top: auto;
  padding: 10px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}

button {
  height: 58px;
  border: none;
  border-radius: 50%;
  background: #1e222b;
  color: white;
  font-size: 20px;
}

button:active {
  transform: scale(0.95);
}

.op { background: #2f80ed; }
.equal { background: #aab3ff; color: black; }
.clear { background: #ff7675; color: black; }
</style>
</head>

<body>

<div class="calculator">

  <!-- MENU (menu.html linked here) -->
  <div id="menu" class="menu-container">
    <iframe src="menu.html"></iframe>
  </div>

  <!-- Top bar -->
  <div class="top-bar">
    <span class="menu-btn" onclick="toggleMenu()">☰</span>
    <div class="title">Calculator</div>
  </div>

  <!-- Calculator UI -->
  <div class="display">
    <input id="expression" class="expression" placeholder="0">
    <div id="result" class="result"></div>
  </div>

  <div class="scientific">
    <button data-v="sin(">sin</button>
    <button data-v="cos(">cos</button>
    <button data-v="tan(">tan</button>
    <button data-v="log(">log</button>
    <button data-v="ln(">ln</button>
  </div>

  <div class="buttons">
    <button class="op" data-act="allclear">AC</button>
    <button class="op" data-v="(">(</button>
    <button class="op" data-v=")">)</button>
    <button class="op" data-v="/">÷</button>

    <button data-v="7">7</button>
    <button data-v="8">8</button>
    <button data-v="9">9</button>
    <button class="op" data-v="*">×</button>

    <button data-v="4">4</button>
    <button data-v="5">5</button>
    <button data-v="6">6</button>
    <button class="op" data-v="-">−</button>

    <button data-v="1">1</button>
    <button data-v="2">2</button>
    <button data-v="3">3</button>
    <button class="op" data-v="+">+</button>

    <button data-v="0">0</button>
    <button data-v=".">.</button>
    <button class="clear" data-act="clear">C</button>
    <button class="equal" data-act="calc">=</button>
  </div>

</div>

<script>
const menu = document.getElementById("menu");

function toggleMenu() {
  menu.classList.toggle("open");
}

/* Calculator logic (unchanged) */
const exprInput = document.getElementById("expression");
const resultEl = document.getElementById("result");

document.addEventListener("pointerdown", e => {
  if (e.target.tagName !== "BUTTON") return;

  const v = e.target.dataset.v;
  const act = e.target.dataset.act;

  if (v) insertAtCursor(v);
  if (act === "allclear") { exprInput.value = ""; resultEl.textContent = ""; }
  if (act === "clear") backspace();
  if (act === "calc") exprInput.value = resultEl.textContent || exprInput.value;

  liveCalculate();
});

function insertAtCursor(text) {
  const s = exprInput.selectionStart;
  const e = exprInput.selectionEnd;
  exprInput.value = exprInput.value.slice(0, s) + text + exprInput.value.slice(e);
  exprInput.selectionStart = exprInput.selectionEnd = s + text.length;
}

function backspace() {
  const s = exprInput.selectionStart;
  if (s > 0) {
    exprInput.value = exprInput.value.slice(0, s - 1) + exprInput.value.slice(s);
    exprInput.selectionStart = exprInput.selectionEnd = s - 1;
  }
}

function liveCalculate() {
  try {
    let e = exprInput.value
      .replace(/sin/g, "Math.sin")
      .replace(/cos/g, "Math.cos")
      .replace(/tan/g, "Math.tan")
      .replace(/log/g, "Math.log10")
      .replace(/ln/g, "Math.log");
    resultEl.textContent = eval(e);
  } catch {
    resultEl.textContent = "";
  }
}
</script>

</body>
</html>
